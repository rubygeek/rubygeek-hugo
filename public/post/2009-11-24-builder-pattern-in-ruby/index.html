<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Builder Pattern in Ruby - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Builder Pattern in Ruby" />
<meta property="og:description" content="Call me crazy, but this is why I classify myself as a language geek. When I learn something fascinating, i wonder hmm how can I do that with X language? My last postI did an example of the Builder pattern as described in Effective Java by Joshua Bloch. The main motivation for me to use Builder is to have flexible parameter lists, without worrying about order of parameters (there are a few other reasons outlined in the book, but this is what I find cool)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2009-11-24-builder-pattern-in-ruby/" />
<meta property="article:published_time" content="2009-11-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2009-11-24T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Builder Pattern in Ruby"/>
<meta name="twitter:description" content="Call me crazy, but this is why I classify myself as a language geek. When I learn something fascinating, i wonder hmm how can I do that with X language? My last postI did an example of the Builder pattern as described in Effective Java by Joshua Bloch. The main motivation for me to use Builder is to have flexible parameter lists, without worrying about order of parameters (there are a few other reasons outlined in the book, but this is what I find cool)."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">24</span>
							<span class="rest">Nov 2009</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Builder Pattern in Ruby</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Call me crazy, but this is why I classify myself as a language geek. When I learn something fascinating, i wonder hmm how can I do that with X language? My <!-- raw HTML omitted -->last post<!-- raw HTML omitted --> I did an example of the Builder pattern as described in <!-- raw HTML omitted -->Effective Java by Joshua Bloch<!-- raw HTML omitted -->. The main motivation for me to use Builder is to have flexible parameter lists, without worrying about order of parameters (there are a few other reasons outlined in the book, but this is what I find cool).</p>
<p>Its too easy.</p>
<p>My class:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Address</span>
  <span style="color:#66d9ef">attr_accessor</span> <span style="color:#e6db74">:street</span>, <span style="color:#e6db74">:street2</span>, <span style="color:#e6db74">:city</span>, <span style="color:#e6db74">:state</span>, <span style="color:#e6db74">:zip</span>, <span style="color:#e6db74">:address_type</span>
  
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">initialize</span>(<span style="color:#f92672">&amp;</span>block)
    
    <span style="color:#75715e">#set default values</span>
    self<span style="color:#f92672">.</span>city <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Chicago</span><span style="color:#e6db74">&#34;</span>
    self<span style="color:#f92672">.</span>state <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">IL</span><span style="color:#e6db74">&#34;</span>
    
    <span style="color:#75715e">#set value from block </span>
    instance_eval <span style="color:#f92672">&amp;</span>block <span style="color:#66d9ef">if</span> block_given?
  
  <span style="color:#66d9ef">end</span>
  
<span style="color:#66d9ef">end</span>
</code></pre></div><p>And the usage of it:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">testDefaultValues</span>
    myaddress <span style="color:#f92672">=</span> <span style="color:#66d9ef">Address</span><span style="color:#f92672">.</span>new
    assert_equal(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Chicago</span><span style="color:#e6db74">&#34;</span>, myaddress<span style="color:#f92672">.</span>city)
    assert_equal(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">IL</span><span style="color:#e6db74">&#34;</span>, myaddress<span style="color:#f92672">.</span>state)
  <span style="color:#66d9ef">end</span>
  
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e"></span><span style="color:#f92672"></span><span style="color:#a6e22e">testStreetStateZip</span> 
    myaddress <span style="color:#f92672">=</span> <span style="color:#66d9ef">Address</span><span style="color:#f92672">.</span>new <span style="color:#66d9ef">do</span> 
      self<span style="color:#f92672">.</span>street <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">this is the street</span><span style="color:#e6db74">&#34;</span>
      self<span style="color:#f92672">.</span>zip <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">11111</span><span style="color:#e6db74">&#34;</span>
    <span style="color:#66d9ef">end</span>
    assert_equal(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Chicago</span><span style="color:#e6db74">&#34;</span>, myaddress<span style="color:#f92672">.</span>city)
    assert_equal(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">IL</span><span style="color:#e6db74">&#34;</span>, myaddress<span style="color:#f92672">.</span>state)
    assert_equal(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">this is the street</span><span style="color:#e6db74">&#34;</span>, myaddress<span style="color:#f92672">.</span>street)
    assert_equal(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">11111</span><span style="color:#e6db74">&#34;</span>, myaddress<span style="color:#f92672">.</span>zip)
  <span style="color:#66d9ef">end</span>
</code></pre></div><p>Wow, huh? Compare to</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testBuilderDefaults</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  Address expected <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Address<span style="color:#f92672">.</span><span style="color:#a6e22e">Builder</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Chicago&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;IL&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
  assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;State is IL&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;IL&#34;</span><span style="color:#f92672">,</span> expected<span style="color:#f92672">.</span><span style="color:#a6e22e">getState</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
  assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;City is Chicago&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Chicago&#34;</span><span style="color:#f92672">,</span> expected<span style="color:#f92672">.</span><span style="color:#a6e22e">getCity</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>then the optional params are chained to that:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testBuilderStreetStateZip</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  Address expected <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Address<span style="color:#f92672">.</span><span style="color:#a6e22e">Builder</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Chicago&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;IL&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">street</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;this is an address&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">zip</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;11111&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
  assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;this is an address&#34;</span><span style="color:#f92672">,</span> expected<span style="color:#f92672">.</span><span style="color:#a6e22e">getStreet</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
  assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;11111&#34;</span><span style="color:#f92672">,</span> expected<span style="color:#f92672">.</span><span style="color:#a6e22e">getZip</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
  assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;IL&#34;</span><span style="color:#f92672">,</span> expected<span style="color:#f92672">.</span><span style="color:#a6e22e">getState</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
  assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Chicago&#34;</span><span style="color:#f92672">,</span> expected<span style="color:#f92672">.</span><span style="color:#a6e22e">getCity</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Yes&hellip; sometimes its hard not to gloat. :-D</p>
<p>yeah yeah yeah, its not really &ldquo;fair&rdquo; to compare strongly typed languages&hellip; but as I said, my motivation is to have easy parameter lists without having to remember specific ordering of params for constructor or use multiple set methods.</p>

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
