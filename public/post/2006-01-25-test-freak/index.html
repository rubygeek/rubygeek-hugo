<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Test Freak! - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Test Freak!" />
<meta property="og:description" content="Note: this post was originally on my &ldquo;PhpGirl&rdquo; blog
My two loyal readers know I like testing. Some say I&#39;m sick.
I&#39;m writing a PHP class for a user, and then think.. oh gee, how do I know if this works?? oh I&#39;ll write a Test::Simple for PHP. Yes, I know there exists one already that uses the power of Perl to test PHP files, but I didn&#39;t have time to figure out how to set that up and probably won&#39;t be able to use perl anyways on the production system." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2006-01-25-test-freak/" />
<meta property="article:published_time" content="2006-01-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2006-01-25T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Test Freak!"/>
<meta name="twitter:description" content="Note: this post was originally on my &ldquo;PhpGirl&rdquo; blog
My two loyal readers know I like testing. Some say I&#39;m sick.
I&#39;m writing a PHP class for a user, and then think.. oh gee, how do I know if this works?? oh I&#39;ll write a Test::Simple for PHP. Yes, I know there exists one already that uses the power of Perl to test PHP files, but I didn&#39;t have time to figure out how to set that up and probably won&#39;t be able to use perl anyways on the production system."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">25</span>
							<span class="rest">Jan 2006</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Test Freak!</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Note: this post was originally on my &ldquo;PhpGirl&rdquo; blog</p>
<p>My two loyal readers know I like testing. Some say I'm sick.</p>
<p>I'm writing a PHP class for a user, and then think.. oh gee, how do I know if this works?? oh I'll write a Test::Simple for PHP. Yes, I know there exists one already that uses the power of Perl to test PHP files, but I didn't have time to figure out how to set that up and probably won't be able to use perl anyways on the production system. I can't stand to have global variables, so I made a class. Uber simple. There's probably better ways to do it (I can imagine something much more elegant in PHP 5). But, what do you expect on a whim and 40 minutes&hellip;</p>
<p>Code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">// Nola&#39;s Wanna Be PHP Test Framework

class Test_Simple {
var $tests_to_run;
var $success_count;
var $failure_count;
var $test_count;

function Test_Simple($params) {
if (isset($_SERVER[&#39;HTTP_HOST&#39;])) {
// we&#39;re on a server use a

$params[&#39;eol&#39;] = &#34;\ n &#34;; //take out spaces, had to have them for this blog
}
$this-&gt;tests_to_run = $params[&#34;tests&#34;];
$this-&gt;eol =  empty($params[&#39;eol&#39;]) ? &#34;\n&#34; : $params[&#39;eol&#39;] ;
$this-&gt;success_count = 0;
$this-&gt;failure_count = 0;
$this-&gt;test_count = 0;
print &#34;1..{$this-&gt;tests_to_run}{$this-&gt;eol}&#34;;
}

function ok ($expression, $message) {
$this-&gt;test_count++;
if ($expression == false) {
print &#34;not &#34;;
$this-&gt;failure_count++;
} else {
$this-&gt;success_count++;
}
print &#34;ok {$this-&gt;test_count} - $message&#34; . $this-&gt;eol;
}

function report() {
print $this-&gt;eol;
if ($this-&gt;test_count tests_to_run) {
print &#34;You ran {$this-&gt;success_count} out of &#34;
. &#34;{$this-&gt;tests_to_run} tests &#34; . $this-&gt;eol;
} else {
print &#34;Opps, looks like you meant to run {$this-&gt;tests_to_run} &#34;
. &#34;tests but ran {$this-&gt;test_count} instead&#34; .$this-&gt;eol;
}
print &#34;Success Rate: &#34;
. (($this-&gt;success_count *100)/ $this-&gt;test_count)
. &#34;%&#34;.$this-&gt;eol;
}

}
</code></pre></div><p>And.. I made some code to test itself..</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$t = new Test_Simple(array(&#34;tests&#34; =&gt; &#34;4&#34;));
$t-&gt;ok($t-&gt;test_count == 1, &#34;one test run&#34;);
$t-&gt;ok($t-&gt;tests_to_run == 4, &#34;running 4 tests&#34;);
$t-&gt;ok($t-&gt;eol == &#34;\n&#34;, &#39;end of line is \n&#39;);
$t-&gt;ok(true, &#34;its true!&#34;);
$t-&gt;ok(!false, &#34;its not false&#34;);

$t-&gt;report();
</code></pre></div><p>I will probably make improvements upon this&hellip; suggestions? .. my test &ldquo;report&rdquo; is a bit more verbose than the standard Test::* in Perl.</p>
<p>I made it so you can run it with the php executable &hellip; or with the web browser.</p>
<p>I tried to install Perl's class <!-- raw HTML omitted -->Apache::TestRunPHP<!-- raw HTML omitted --> but had a few problems getting it setup on windows. I think I need mod_perl installed on my Apache. I did find out that it takes a different approach than my simple class, and starts apache, runs tests, prints report and shuts down apache. Interesting. My tests I only intended to run individually (actually didn't know how TestRunPHP worked till after I wrote my class).</p>

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
