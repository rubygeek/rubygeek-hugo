<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Data Structures in Clojure and Elixir: Maps - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Data Structures in Clojure and Elixir: Maps" />
<meta property="og:description" content="Elixir Tuples used { } .. but maps use %{ }. You can use anything for a key.. here are string keys:
iex(1)&gt; data = %{&#34;name&#34; =&gt; &#34;nola&#34;, &#34;color&#34; =&gt; &#34;red&#34;} %{&#34;color&#34; =&gt; &#34;red&#34;, &#34;name&#34; =&gt; &#34;nola&#34;} iex(4)&gt; data[&#34;name&#34;] &#34;nola&#34; If you use a string to set the value, obviously you need to use that to get the value.
Using atoms for keys is alot nicer for maps, the syntax is shorter and you can use ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2017-12-21-data-structures-in-clojure-and-elixir-maps/" />
<meta property="article:published_time" content="2017-12-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-12-21T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Data Structures in Clojure and Elixir: Maps"/>
<meta name="twitter:description" content="Elixir Tuples used { } .. but maps use %{ }. You can use anything for a key.. here are string keys:
iex(1)&gt; data = %{&#34;name&#34; =&gt; &#34;nola&#34;, &#34;color&#34; =&gt; &#34;red&#34;} %{&#34;color&#34; =&gt; &#34;red&#34;, &#34;name&#34; =&gt; &#34;nola&#34;} iex(4)&gt; data[&#34;name&#34;] &#34;nola&#34; If you use a string to set the value, obviously you need to use that to get the value.
Using atoms for keys is alot nicer for maps, the syntax is shorter and you can use ."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">21</span>
							<span class="rest">Dec 2017</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Data Structures in Clojure and Elixir: Maps</h1>
				</div>
			</div>
					
			<div class="markdown">
				<h3 id="elixir">Elixir</h3>
<p>Tuples used <code>{ }</code> .. but maps use <code>%{ }</code>. You can use anything for a key..  here are string keys:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">1</span>)<span style="color:#f92672">&gt;</span> data <span style="color:#f92672">=</span> %{<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">name</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">color</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">red</span><span style="color:#e6db74">&#34;</span>}
%{<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">color</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">red</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">name</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>}

iex(<span style="color:#ae81ff">4</span>)<span style="color:#f92672">&gt;</span> data[<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">name</span><span style="color:#e6db74">&#34;</span>]
<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>If you use a string to set the value, obviously you need to use that to get the value.</p>
<p>Using atoms for keys is alot nicer for maps, the syntax is shorter and you can use  <code>.name</code> to access the value</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">&gt;</span> more_data <span style="color:#f92672">=</span> %{<span style="color:#e6db74">city</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Austin</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">state</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">TX</span><span style="color:#e6db74">&#34;</span>}
%{<span style="color:#e6db74">city</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Austin</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">state</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">TX</span><span style="color:#e6db74">&#34;</span>}

iex(<span style="color:#ae81ff">5</span>)<span style="color:#f92672">&gt;</span> more_data<span style="color:#f92672">.</span>city
<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Austin</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>I don't know why you would, but you can use integers as keys too:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">3</span>)<span style="color:#f92672">&gt;</span> yet_more <span style="color:#f92672">=</span> %{<span style="color:#ae81ff">1</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">user 1</span><span style="color:#e6db74">&#34;</span>, <span style="color:#ae81ff">2</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">user 2</span><span style="color:#e6db74">&#34;</span>}
%{<span style="color:#ae81ff">1</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">user 1</span><span style="color:#e6db74">&#34;</span>, <span style="color:#ae81ff">2</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">user 2</span><span style="color:#e6db74">&#34;</span>}

iex(<span style="color:#ae81ff">12</span>)<span style="color:#f92672">&gt;</span> yet_more[<span style="color:#ae81ff">1</span>]
<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">user 1</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>And, even a list as a key:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">8</span>)<span style="color:#f92672">&gt;</span> weird_keys <span style="color:#f92672">=</span> %{ [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">one two</span><span style="color:#e6db74">&#34;</span>, [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>] <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">three four</span><span style="color:#e6db74">&#34;</span>}
%{[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">one two</span><span style="color:#e6db74">&#34;</span>, [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>] <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">three four</span><span style="color:#e6db74">&#34;</span>}

iex(<span style="color:#ae81ff">9</span>)<span style="color:#f92672">&gt;</span> weird_keys[[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>]]
<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">one two</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>I can't think of a use case for that, but if you need it, then you can do it.</p>
<p>Some methods for maps:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">6</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">.</span>keys(more_data)
[<span style="color:#e6db74">:city</span>, <span style="color:#e6db74">:state</span>]

iex(<span style="color:#ae81ff">7</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">.</span>keys(data)
[<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">color</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">name</span><span style="color:#e6db74">&#34;</span>]

iex(<span style="color:#ae81ff">13</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">.</span>keys(weird_keys)
[[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>]]

iex(<span style="color:#ae81ff">14</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">.</span>values(weird_keys)
[<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">one two</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">three four</span><span style="color:#e6db74">&#34;</span>]

iex(<span style="color:#ae81ff">25</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Enum</span><span style="color:#f92672">.</span>count(weird_keys)
<span style="color:#ae81ff">2</span>
</code></pre></div><h4 id="updating-a-value-in-a-map">Updating a value in a map</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">15</span>)<span style="color:#f92672">&gt;</span> data <span style="color:#f92672">=</span> %{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">red</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>}

(<span style="color:#ae81ff">16</span>)<span style="color:#f92672">&gt;</span> updated <span style="color:#f92672">=</span> %{data <span style="color:#f92672">|</span> <span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">pink</span><span style="color:#e6db74">&#34;</span> }
%{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">pink</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>}
</code></pre></div><p>Using the | operator with either syntax for strings or atom keys (whichever you are using) ie  `&quot;color&rdquo; =&gt; &ldquo;pink&rdquo;'.</p>
<p>But if the key does not exist, you will get an exception!</p>
<p>To add a new key to a map, you use <code>Map.put_new</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">1</span>)<span style="color:#f92672">&gt;</span> data <span style="color:#f92672">=</span> %{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">red</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>}

iex(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">.</span>put_new(data, <span style="color:#e6db74">:state</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">TX</span><span style="color:#e6db74">&#34;</span>)
%{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">red</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">state</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">TX</span><span style="color:#e6db74">&#34;</span>}
</code></pre></div><p>If the key was already there, the change is ignored.</p>
<p>To add a new key to a map reguardless if it was there before or not use:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">10</span>)<span style="color:#f92672">&gt;</span> data <span style="color:#f92672">=</span> %{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">red</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>}
%{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">red</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>}

iex(<span style="color:#ae81ff">11</span>)<span style="color:#f92672">&gt;</span> more <span style="color:#f92672">=</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">.</span>put(data, <span style="color:#e6db74">:color</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">green</span><span style="color:#e6db74">&#34;</span>)
%{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">green</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>}

iex(<span style="color:#ae81ff">12</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Map</span><span style="color:#f92672">.</span>put(more, <span style="color:#e6db74">:state</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">TX</span><span style="color:#e6db74">&#34;</span>) 
%{<span style="color:#e6db74">color</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">green</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">name</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">nola</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">state</span>: <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">TX</span><span style="color:#e6db74">&#34;</span>}
</code></pre></div><p>Still, the data is not actually changed but a copy is returned. The original is unchanged.</p>
<h3 id="clojure">Clojure</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (hash-map <span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;nola&#34;</span> <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;TX&#34;</span> <span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;red&#34;</span>)
{<span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;red&#34;</span>, <span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;nola&#34;</span>, <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;TX&#34;</span>}

user=&gt; (array-map <span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;nola&#34;</span> <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;TX&#34;</span> <span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;red&#34;</span>)
{<span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;nola&#34;</span>, <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;TX&#34;</span>, <span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;red&#34;</span>}
</code></pre></div><p>I was trying to figure out what the difference was and found this on <a href="https://stackoverflow.com/questions/26050540/what-is-the-difference-between-the-hash-map-and-array-map-in-clojure">stackoverflow</a></p>
<!-- raw HTML omitted -->
<p>If you notice in my code above, the hash-map has the keys in a different order than I created them in.</p>
<p>So, thats the difference.</p>
<p>Using the literal <code>{ }</code> it produces an array-map.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (class {<span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;Nola&#34;</span> <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;tx&#34;</span>})
clojure.lang.PersistentArrayMap
</code></pre></div><p>Some functions for maps:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#66d9ef">def </span>data {<span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;red&#34;</span>, <span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;nola&#34;</span>, <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;TX&#34;</span>})
<span style="color:#f92672">#</span><span style="color:#e6db74">&#39;user/data</span>

user=&gt; (keys data)
(<span style="color:#e6db74">:color</span> <span style="color:#e6db74">:name</span> <span style="color:#e6db74">:state</span>)

user=&gt; (vals data)
(<span style="color:#e6db74">&#34;red&#34;</span> <span style="color:#e6db74">&#34;nola&#34;</span> <span style="color:#e6db74">&#34;TX&#34;</span>)

user=&gt; (count data)
<span style="color:#ae81ff">3</span>
</code></pre></div><p>Editing or adding new keys to a map:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (assoc data <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;IL&#34;</span>)
{<span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;red&#34;</span>, <span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;nola&#34;</span>, <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;IL&#34;</span>}

user=&gt; (assoc data <span style="color:#e6db74">:food</span> <span style="color:#e6db74">&#34;tacos&#34;</span>)
{<span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;red&#34;</span>, <span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;nola&#34;</span>, <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;TX&#34;</span>, <span style="color:#e6db74">:food</span> <span style="color:#e6db74">&#34;tacos&#34;</span>}
</code></pre></div><p>Unlike Elixir, Clojure doesn't care if this value is new or not when updating a map. It also doesn't change the original data structure like Elixir.</p>
<p>Let me know if I am understanding these languages right. Next post will talk about <a href="/2017/12/26/data-structures-in-clojure-and-elixir-structs-records/">Elixir Structs and Clojure Records</a>.</p>
<p>See my post on <a href="/2017/12/13/data-structures-in-clojure-and-elixir-lists-tuples-vectors/">Lists, Tuples, Vectors</a> and <a href="/2017/12/17/data-structures-in-clojure-and-elixir-sets/">Sets</a>.</p>

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
