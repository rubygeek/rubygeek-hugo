<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Two Cool Tools for Clojure Development - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Two Cool Tools for Clojure Development" />
<meta property="og:description" content="I&#39;ve recently used a couple tools that I want to write about because I think they are pretty useful.
1. Eastwood Eastwood is a linter, which will check your syntax to see if it is valid. BTW I have actually made this mistake for real! The github page lists all the things it checks for and a lot of how to configure eastwood.
To get started, Install into your lein profiles." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2015-12-12-two-cool-tools-for-clojure-development/" />
<meta property="article:published_time" content="2015-12-12T14:43:49+00:00" />
<meta property="article:modified_time" content="2015-12-12T14:43:49+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Two Cool Tools for Clojure Development"/>
<meta name="twitter:description" content="I&#39;ve recently used a couple tools that I want to write about because I think they are pretty useful.
1. Eastwood Eastwood is a linter, which will check your syntax to see if it is valid. BTW I have actually made this mistake for real! The github page lists all the things it checks for and a lot of how to configure eastwood.
To get started, Install into your lein profiles."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">12</span>
							<span class="rest">Dec 2015</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Two Cool Tools for Clojure Development</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>I've recently used a couple tools that I want to write about because I think they are pretty useful.</p>
<h2 id="1-eastwood">1. Eastwood</h2>
<p><a href="https://github.com/jonase/eastwood">Eastwood</a> is a linter, which will check your syntax to see if it is valid. BTW I have actually made this mistake for real! The github page lists all the things it checks for and a lot of how to configure eastwood.</p>
<p>To get started, Install into your lein profiles.clj:</p>
<pre><code>{:user {:plugins [[jonase/eastwood &quot;0.2.1&quot;]]}}
</code></pre><p>My function, which by the way, is awesome:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clj" data-lang="clj">(<span style="color:#66d9ef">defn </span>my-awesome-function [x y z]
<span style="color:#e6db74">&#34;My function is awesome&#34;</span>
(+ x y z))
</code></pre></div><p>Running <code>lein eastwood</code> in the project shows me:</p>
<pre><code>lein eastwood
== Eastwood 0.2.1 Clojure 1.7.0 JVM 1.8.0_60
Directories scanned for source files:
src test
== Linting blog-post.core ==
Entering directory `/Users/nolastowe/practicing/clojure/blog-post'
src/blog_post/core.clj:5:7: misplaced-docstrings: Possibly misplaced docstring, my-awesome-function
src/blog_post/core.clj:5:1: unused-ret-vals: Constant value is discarded: &quot;My function is awesome&quot;
== Linting blog-post.core-test ==
== Warnings: 2 (not including reflection warnings)  Exceptions thrown: 0
Subprocess failed
</code></pre><p>Doh. The docstring is in the wrong place, correcting that and eastwood is happy. That is an easy mistake to make!</p>
<pre><code>lein eastwood
== Eastwood 0.2.1 Clojure 1.7.0 JVM 1.8.0_60
Directories scanned for source files:
src test
== Linting blog-post.core ==
== Linting blog-post.core-test ==
== Warnings: 0 (not including reflection warnings)  Exceptions thrown: 0
</code></pre><p>I've used eastwood a lot when I was developing amazon lambda functions, when I couldn't see the result till I've uploaded to amazon. At first was frustrated only after all that to find an error which required me to do another compile to jar and upload. Now I use it before commit or when i've completed a unit of work or when I just can't figure why something is not working..always a chance I did something stupid with syntax.</p>
<h2 id="2-criterium">2. Criterium</h2>
<p>This library is for benchmarking clojure and I was using it to compare different implementations when I was working on adding some string functions to Clojure. Initially I added it to my lein profiles (similar to how i did with eastwood) which works fine for testing in the repl. <a href="https://twitter.com/smashthepast/">Ghadi</a> saw me talking about using it in Clojurians Slack and gave me a bash script to start any version of clojure and criterium with a repl:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>M2<span style="color:#f92672">=</span>$HOME/.m2/repository
CLASSPATH<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>M2<span style="color:#e6db74">}</span>/criterium/criterium/0.4.3/criterium-0.4.3.jar:src
JOPTS<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;-Xmx4G -XX:+UseG1GC&#39;</span>
CLOJURE_JAR<span style="color:#f92672">=</span>$M2/org/clojure/clojure/<span style="color:#e6db74">${</span>CLOJURE_VERSION<span style="color:#e6db74">}</span>/clojure-<span style="color:#e6db74">${</span>CLOJURE_VERSION<span style="color:#e6db74">}</span>.jar
java $JOPTS -cp <span style="color:#e6db74">${</span>CLASSPATH<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>CLOJURE_JAR<span style="color:#e6db74">}</span> clojure.main
</code></pre></div><p>Then save it as <code>repl-version.sh</code> and run with <code>CLOJURE_VERSION=1.7.0 repl-version.sh</code> to open a repl, then you can test away. I see this being useful when you are working on clojure itself or want to compare things in different versions of clojure. I used it when I was working on a patch for Clojure.</p>
<p>One of the things I used it for was figuring  wanted to compare char? and instance? which should I use.. this is a true story! I was trying to figure this out one day..</p>
<pre><code>user=&gt; (quick-bench (char? \c))
Evaluation count : 39012534 in 6 samples of 6502089 calls.
Execution time mean : 5.188821 ns
Execution time std-deviation : 0.351751 ns
Execution time lower quantile : 4.755146 ns ( 2.5%)
Execution time upper quantile : 5.544008 ns (97.5%)
Overhead used : 10.020671 ns

user=&gt; (quick-bench (instance? Character  \c))
Evaluation count : 51496848 in 6 samples of 8582808 calls.
Execution time mean : 2.510016 ns
Execution time std-deviation : 0.701679 ns
Execution time lower quantile : 1.693617 ns ( 2.5%)
Execution time upper quantile : 3.375066 ns (97.5%)
Overhead used : 9.812462 ns
nil
</code></pre><p>I wondered, how does <code>char?</code>  work? So I looked at the source:</p>
<pre><code>user=&gt; (source char?)
(def
^{:arglists '([x])
:doc &quot;Return true if x is a Character&quot;
:added &quot;1.0&quot;
:static true}
char? (fn ^:static char? [x] (instance? Character x)))
nil
</code></pre><p>Ahh, I see, it just checked the <code>instance?</code> .. so I look what that function does:</p>
<pre><code>user=&gt; (source instance?)
(def
^{:arglists '([^Class c x])
:doc &quot;Evaluates x and tests if it is an instance of the class
c. Returns true or false&quot;
:added &quot;1.0&quot;}
instance? (fn instance? [^Class c x] (. c (isInstance x))))
nil
</code></pre><p>So of course, instance will be faster than char &hellip;. If you know your class of object, it looks like instance?  will always be a little faster.  But there ya have benchmarking in Clojure with Criterium. :)</p>
<p>When reviewing this post, Ghadi said:</p>
<!-- raw HTML omitted -->

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
