<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Data Structures in Clojure and Elixir:  Sets - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Data Structures in Clojure and Elixir:  Sets" />
<meta property="og:description" content="My last post talked about Lists, Tuples and Vectors comparing Elixir and Clojure &hellip; now lets cover a related topic.. sets.
When you think of set, think of Math Sets.
Elixir There are two ways to create a Set in Elixir
Using the Pipe Operator and put:
set = MapSet.new |&gt; MapSet.put(&#34;apple&#34;) |&gt; MapSet.put(&#34;apple&#34;) |&gt; MapSet.put(&#34;banana&#34;) #MapSet&lt;[&#34;apple&#34;, &#34;banana&#34;]&gt; Or use a List and pass that to MapSet.new
iex(1)&gt; set = MapSet." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2017-12-17-data-structures-in-clojure-and-elixir-sets/" />
<meta property="article:published_time" content="2017-12-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-12-17T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Data Structures in Clojure and Elixir:  Sets"/>
<meta name="twitter:description" content="My last post talked about Lists, Tuples and Vectors comparing Elixir and Clojure &hellip; now lets cover a related topic.. sets.
When you think of set, think of Math Sets.
Elixir There are two ways to create a Set in Elixir
Using the Pipe Operator and put:
set = MapSet.new |&gt; MapSet.put(&#34;apple&#34;) |&gt; MapSet.put(&#34;apple&#34;) |&gt; MapSet.put(&#34;banana&#34;) #MapSet&lt;[&#34;apple&#34;, &#34;banana&#34;]&gt; Or use a List and pass that to MapSet.new
iex(1)&gt; set = MapSet."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">17</span>
							<span class="rest">Dec 2017</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Data Structures in Clojure and Elixir:  Sets</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>My <a href="/2017/12/13/data-structures-in-clojure-and-elixir-lists-tuples-vectors/">last post</a> talked about Lists, Tuples and Vectors comparing <a href="https://elixir-lang.org/">Elixir</a> and <a href="https://clojure.org/">Clojure</a> &hellip; now lets cover a related topic.. sets.</p>
<p>When you think of set, think of Math Sets.</p>
<h3 id="elixir">Elixir</h3>
<p>There are two ways to create a Set in Elixir</p>
<p>Using the Pipe Operator and <code>put</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">set <span style="color:#f92672">=</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>new <span style="color:#f92672">|&gt;</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>put(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>) <span style="color:#f92672">|&gt;</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>put(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>) <span style="color:#f92672">|&gt;</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>put(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">banana</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e">#MapSet&lt;[&#34;apple&#34;, &#34;banana&#34;]&gt;</span>
</code></pre></div><p>Or use a List and pass that to <code>MapSet.new</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">1</span>)<span style="color:#f92672">&gt;</span> set <span style="color:#f92672">=</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>new([<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">orange</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>])
<span style="color:#75715e">#MapSet&lt;[&#34;apple&#34;, &#34;grape&#34;, &#34;orange&#34;]&gt;</span>
</code></pre></div><p>I purposely put duplicates when I created it to see what would happen. It quietly dismissed the duplicate value and made a collection of unique values.</p>
<p>Passing a list to new would be a good way to filter out duplicates in a collection as well as build a set more easily.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">3</span>)<span style="color:#f92672">&gt;</span> unique_values <span style="color:#f92672">=</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>new([<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">orange</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>]) <span style="color:#f92672">|&gt;</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>to_list()
[<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">orange</span><span style="color:#e6db74">&#34;</span>]
</code></pre></div><p>Some more functions for sets</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">4</span>)<span style="color:#f92672">&gt;</span> fruit <span style="color:#f92672">=</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>new([<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">orange</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>])
<span style="color:#75715e">#MapSet&lt;[&#34;apple&#34;, &#34;grape&#34;, &#34;orange&#34;]&gt;</span>

iex(<span style="color:#ae81ff">5</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>member?(fruit, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>)
true
</code></pre></div><p>and subset</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">iex(<span style="color:#ae81ff">4</span>)<span style="color:#f92672">&gt;</span> fruit <span style="color:#f92672">=</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>new([<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">orange</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>])
<span style="color:#75715e">#MapSet&lt;[&#34;apple&#34;, &#34;grape&#34;, &#34;orange&#34;]&gt;</span>

iex(<span style="color:#ae81ff">6</span>)<span style="color:#f92672">&gt;</span> other_fruit <span style="color:#f92672">=</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>new([<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apple</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">grape</span><span style="color:#e6db74">&#34;</span>])
<span style="color:#75715e">#MapSet&lt;[&#34;apple&#34;, &#34;grape&#34;]&gt;</span>

iex(<span style="color:#ae81ff">8</span>)<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">MapSet</span><span style="color:#f92672">.</span>subset?(other_fruit, fruit)
true
</code></pre></div><p>Read more on <a href="https://hexdocs.pm/elixir/MapSet.html">MapSet</a></p>
<h3 id="clojure">Clojure</h3>
<p>You have two ways to make a set in Clojure, using the <code>set</code> function and the <code>#{}</code> literal.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (set [<span style="color:#e6db74">:apple</span> <span style="color:#e6db74">:grape</span> <span style="color:#e6db74">:orange</span> <span style="color:#e6db74">:orange</span>])
<span style="color:#f92672">#</span>{<span style="color:#e6db74">:orange</span> <span style="color:#e6db74">:apple</span> <span style="color:#e6db74">:grape</span>}

user=&gt; (set <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">:apple</span> <span style="color:#e6db74">:grape</span> <span style="color:#e6db74">:orange</span> <span style="color:#e6db74">:orange</span>)
<span style="color:#f92672">#</span>{<span style="color:#e6db74">:orange</span> <span style="color:#e6db74">:apple</span> <span style="color:#e6db74">:grape</span>}

</code></pre></div><p>We are converting a vector or a list to a set.</p>
<p>Also testing putting duplicates and as expected, the result is all unique values.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#66d9ef">def </span>taco-restaurants <span style="color:#f92672">#</span>{<span style="color:#e6db74">&#34;torchys&#34;</span> <span style="color:#e6db74">&#34;maudies&#34;</span> <span style="color:#e6db74">&#34;torchys&#34;</span> <span style="color:#e6db74">&#34;taco bell&#34;</span>})

IllegalArgumentException Duplicate key<span style="color:#960050;background-color:#1e0010">:</span> torchys  clojure.lang.PersistentHashSet.createWithCheck (<span style="color:#a6e22e">PersistentHashSet.java</span><span style="color:#e6db74">:68</span>)
RuntimeException Unmatched delimiter<span style="color:#960050;background-color:#1e0010">:</span> )  clojure.lang.Util.runtimeException (<span style="color:#a6e22e">Util.java</span><span style="color:#e6db74">:221</span>)
</code></pre></div><p>No, the error is not calling <code>taco bell</code> a restaurant, it is putting <code>torchys</code> twice. YIKES&hellip; the literal syntax does not like duplicates. If you think your values might have duplicates, put in vector first and pass to <code>set</code>.</p>
<!-- raw HTML omitted -->
<p>Some useful functions for sets:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#66d9ef">def </span>valid-actions <span style="color:#f92672">#</span>{<span style="color:#e6db74">:get</span> <span style="color:#e6db74">:post</span>})
<span style="color:#f92672">#</span><span style="color:#e6db74">&#39;user/valid-actions</span>

user=&gt; (contains? valid-actions <span style="color:#e6db74">:post</span>)
true

user=&gt; (contains? valid-actions <span style="color:#e6db74">:head</span>)
false
</code></pre></div><p>Use a set when you need to see if a certain value is one of X. It is surprisingly not easy to do the same with checking membership in a list or vector :) Use a set, you don't need duplicates anyways so it makes sense.</p>
<p>There is a Set namespace with functions for sets:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#a6e22e">require</span> <span style="color:#f92672">&#39;</span>[clojure.set <span style="color:#e6db74">:as</span> set])
nil

user=&gt; (<span style="color:#a6e22e">set/subset?</span> <span style="color:#f92672">#</span>{<span style="color:#e6db74">:post</span>} valid-actions)
true

user=&gt; (<span style="color:#a6e22e">set/subset?</span> <span style="color:#f92672">#</span>{<span style="color:#e6db74">:head</span>} valid-actions)
false
</code></pre></div><p>Next, we'll cover <a href="/2017/12/21/data-structures-in-clojure-and-elixir-maps/">Maps!</a></p>

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
