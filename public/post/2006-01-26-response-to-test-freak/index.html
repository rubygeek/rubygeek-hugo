<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Response to Test Freak! - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Response to Test Freak!" />
<meta property="og:description" content="Note: this post was originally on my &ldquo;PhpGirl&rdquo; blog
Update: Chris Shiflett posted an informative responseon Test-More for PHP and testing in general
I started responding to the comment to my last post, then realized it was going to be long. So I put it in a post.
Thanks Damien Gilles, I have looked at that. Problem is, I have some resistance at work to using outside code. So I would need to work up a case for it beforehand and analyize it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2006-01-26-response-to-test-freak/" />
<meta property="article:published_time" content="2006-01-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2006-01-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Response to Test Freak!"/>
<meta name="twitter:description" content="Note: this post was originally on my &ldquo;PhpGirl&rdquo; blog
Update: Chris Shiflett posted an informative responseon Test-More for PHP and testing in general
I started responding to the comment to my last post, then realized it was going to be long. So I put it in a post.
Thanks Damien Gilles, I have looked at that. Problem is, I have some resistance at work to using outside code. So I would need to work up a case for it beforehand and analyize it."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">26</span>
							<span class="rest">Jan 2006</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Response to Test Freak!</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Note: this post was originally on my &ldquo;PhpGirl&rdquo; blog</p>
<p>Update: Chris Shiflett <!-- raw HTML omitted -->posted an informative response<!-- raw HTML omitted --> on Test-More for PHP and testing in general</p>
<p>I started responding to the comment to my last post, then realized it was going to be long. So I put it in a post.</p>
<p>Thanks Damien Gilles, I have looked at that. Problem is, I have some resistance at work to using outside code. So I would need to work up a case for it beforehand and analyize it.</p>
<p>For really simple tests, this sort of testing (my friend Keith calls it Sanity testing) works fine. I don't really see the need to use a Unit Test framework. I have used PHPUnit before and it works fine, but ends up being just more typing (I think, but I'll try it and compare my results).</p>
<p>Here's an example of how I used it..</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">include_once(&#34;config.php&#34;);
include_once(&#34;User_Model.class.php&#34;);

$t = new Test_Simple(array(&#34;tests&#34; =&gt; 20, &#34;eol&#34;=&gt;&#34; n&#34;));

connect_db();
test_setup();

// Test object get/set methods
$user = new User_Model();
$user-&gt;setUserName(&#34;jdoe&#34;);
$user-&gt;setRealName(&#34;John Doe Test&#34;);
$user-&gt;setEmail(&#34;john@doe.com&#34;);
$user-&gt;setPermission(&#34;1&#34;);

// test true values
$t-&gt;ok( $user-&gt;getRealName()   == &#34;John Doe Test&#34;, &#34;get RealName&#34; );
$t-&gt;ok( $user-&gt;getUserName()   == &#34;jdoe&#34;, &#34;get UserName&#34; );
$t-&gt;ok( $user-&gt;getEmail()      == &#34;john@doe.com&#34;, &#34;get Email&#34; );
$t-&gt;ok( $user-&gt;getPermission() == 1, &#34;get Permission&#34;);

// test false values
$t-&gt;ok( $user-&gt;getRealName()   != &#34;Susie Doe&#34;, &#34;Not Realname Suzie Doe&#34; );
$t-&gt;ok( $user-&gt;getUserName()   != &#34;sdoe&#34;, &#34;Not Username sdoe&#34; );
$t-&gt;ok( $user-&gt;getEmail()      != &#34;suz@doe.com&#34;, &#34;Not email suz@doe.com&#34; );
$t-&gt;ok( $user-&gt;getPermission() != 0, &#34;Not Permission 0&#34; );

// Save user
$saveResult = $user-&gt;save();
$t-&gt;ok( $saveResult == true, &#34;Save was successful&#34;);

// Get ID of last user
$id = $user-&gt;id;

// clear object
$user = null;

// load user again and test again
$user = new User_Model($id);

// test true values
$t-&gt;ok( $user-&gt;getRealName()   == &#34;John Doe Test&#34;, &#34;get RealName after load&#34; );
$t-&gt;ok( $user-&gt;getUserName()   == &#34;jdoe&#34;, &#34;get UserName after load&#34; );
$t-&gt;ok( $user-&gt;getEmail()      == &#34;john@doe.com&#34;, &#34;get Email after load&#34; );
$t-&gt;ok( $user-&gt;getPermission() == 1, &#34;get Permission after load&#34;);

// change username
$user-&gt;setRealName(&#34;Mary Jane Test&#34;);
$user-&gt;setUserName(&#34;mjane&#34;);
$user-&gt;setEmail(&#34;mary@jane.com&#34;);
$user-&gt;setPermission(&#34;2&#34;);
$updateResult = $user-&gt;save();

// test true values
$t-&gt;ok( $updateResult == true, &#34;Update was successful&#34;);
$t-&gt;ok( $user-&gt;id == $id, &#34;ID stayed the same&#34;);
$t-&gt;ok( $user-&gt;getRealName()   == &#34;Mary Jane Test&#34;, &#34;get RealName after update&#34; );
$t-&gt;ok( $user-&gt;getUserName()   == &#34;mjane&#34;, &#34;get UserName after update&#34; );
$t-&gt;ok( $user-&gt;getEmail()      == &#34;mary@jane.com&#34;, &#34;get Email after update&#34; );
$t-&gt;ok( $user-&gt;getPermission() == 2, &#34;get Permission after update&#34;);

$deleteResult = $user-&gt;delete();
$t-&gt;ok( $deleteResult == true, &#34;Delete was successful&#34;);

test_teardown();
$t-&gt;report();

// Clean up our mess before and after
function test_setup() {
connect_db();
$result = mysql_query(&#34;DELETE FROM users WHERE real_name like &#39;%test%&#39;&#34;);
}

function test_teardown() {
connect_db();
$result = mysql_query(&#34;DELETE FROM users WHERE real_name like &#39;%test%&#39;&#34;);
}
</code></pre></div><p>I did do a test_setup and test_teardown, similar to what you would have in a unit test. I only need to do this at the start of my &ldquo;suite&rdquo; and the end.</p>
<p>Of course, the main reason there's a test more (copied from Perl)  for php is so you can use Perl to run the test suites.  See this presentation by <!-- raw HTML omitted -->Geoffrey Young<!-- raw HTML omitted --> and <!-- raw HTML omitted -->Chris Shiflett<!-- raw HTML omitted --> on <!-- raw HTML omitted -->Power PHP Testing(tgz file)<!-- raw HTML omitted --> which, if you have a site with mixed PHP and Perl, would be a excellent way to test all your code with the same method.</p>

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
