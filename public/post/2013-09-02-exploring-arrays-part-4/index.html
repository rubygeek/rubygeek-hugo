<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Exploring Arrays - Part 4 - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Exploring Arrays - Part 4" />
<meta property="og:description" content="combination combination(n) { |c| block } → ary combination(n) → an_enumerator  Next method up for discussion is combination, when I saw this my first thought was &ldquo;OH wow!! I can make games!!&quot;. Being able to generate datasets I think is key to making a game. Being able to make a list of combinations, then pick on at random I think is cool. Lets try it
&gt;&gt; bad_guys = [:ogre, :giant, :zombie] =&gt; [:ogre, :giant, :zombie] &gt;&gt; bad_guys." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2013-09-02-exploring-arrays-part-4/" />
<meta property="article:published_time" content="2013-09-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2013-09-02T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Exploring Arrays - Part 4"/>
<meta name="twitter:description" content="combination combination(n) { |c| block } → ary combination(n) → an_enumerator  Next method up for discussion is combination, when I saw this my first thought was &ldquo;OH wow!! I can make games!!&quot;. Being able to generate datasets I think is key to making a game. Being able to make a list of combinations, then pick on at random I think is cool. Lets try it
&gt;&gt; bad_guys = [:ogre, :giant, :zombie] =&gt; [:ogre, :giant, :zombie] &gt;&gt; bad_guys."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">02</span>
							<span class="rest">Sep 2013</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Exploring Arrays - Part 4</h1>
				</div>
			</div>
					
			<div class="markdown">
				<h2 id="combination">combination</h2>
<pre><code>combination(n) { |c| block } → ary 
combination(n) → an_enumerator
</code></pre>
<p>Next method up for discussion is combination, when I saw this my first thought was &ldquo;OH wow!! I can make games!!&quot;. Being able to generate datasets I think is key to making a game. Being able to make a list of combinations, then pick on at random I think is cool. Lets try it</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#f92672">&gt;&gt;</span> bad_guys <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:ogre</span>, <span style="color:#e6db74">:giant</span>, <span style="color:#e6db74">:zombie</span><span style="color:#f92672">]</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:ogre</span>, <span style="color:#e6db74">:giant</span>, <span style="color:#e6db74">:zombie</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> bad_guys<span style="color:#f92672">.</span>combination(<span style="color:#ae81ff">2</span><span style="color:#f92672"></span>)<span style="color:#f92672">.</span>to_a
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#f92672">[</span><span style="color:#e6db74">:ogre</span>, <span style="color:#e6db74">:giant</span><span style="color:#f92672">]</span>, <span style="color:#f92672">[</span><span style="color:#e6db74">:ogre</span>, <span style="color:#e6db74">:zombie</span><span style="color:#f92672">]</span>, <span style="color:#f92672">[</span><span style="color:#e6db74">:giant</span>, <span style="color:#e6db74">:zombie</span><span style="color:#f92672">]</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> bad_guys<span style="color:#f92672">.</span>combination(<span style="color:#ae81ff">2</span><span style="color:#f92672"></span>)<span style="color:#f92672">.</span>to_a<span style="color:#f92672">.</span>sample(<span style="color:#ae81ff">1</span><span style="color:#f92672"></span>)<span style="color:#f92672">.</span>flatten
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:giant</span>, <span style="color:#e6db74">:zombie</span><span style="color:#f92672">]</span>
</code></pre></div><p>Lets build an array of bad guys, generate all the combinations of 2 badguys, choose a set of 2 at random and flatten it. Here is the list of bad guys for our awesome game. Cool huh? Doesn't this just make you want to stop everything and make a game now? Ok, maybe it is just me. :)</p>
<h2 id="compact">compact</h2>
<pre><code>compact → new_ary 
Returns a copy of self with all nil elements removed.
</code></pre>
<p>I recently used this on a project (with help from a friend, Thanks Corey!) where I had 1 or 2 items and if I had two I wanted to be $100-200 but if just one I wanted it to be $100 or $200.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#f92672">&gt;&gt;</span> price_a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$100</span><span style="color:#e6db74">&#34;</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$100</span><span style="color:#e6db74">&#34;</span>
<span style="color:#f92672">&gt;&gt;</span> price_b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$200</span><span style="color:#e6db74">&#34;</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$200</span><span style="color:#e6db74">&#34;</span>
<span style="color:#f92672">&gt;&gt;</span> <span style="color:#f92672">[</span>price_a, price_b<span style="color:#f92672">]</span><span style="color:#f92672">.</span>compact<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">-</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$100-$200</span><span style="color:#e6db74">&#34;</span>

<span style="color:#f92672">&gt;&gt;</span> price_a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$100</span><span style="color:#e6db74">&#34;</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$100</span><span style="color:#e6db74">&#34;</span>
<span style="color:#f92672">&gt;&gt;</span> price_b <span style="color:#f92672">=</span> <span style="color:#66d9ef">nil</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">nil</span>
<span style="color:#f92672">&gt;&gt;</span> <span style="color:#f92672">[</span>price_a, price_b<span style="color:#f92672">]</span><span style="color:#f92672">.</span>compact<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">-</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$100</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>Cool huh? previously I had something hideous like</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">if</span> price_a<span style="color:#f92672">.</span>present? <span style="color:#f92672">&amp;&amp;</span> price_b<span style="color:#f92672">.</span>present?
 <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">#{</span>price_a<span style="color:#e6db74">}</span><span style="color:#e6db74">-</span><span style="color:#e6db74">#{</span>price_b<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">elsif</span> price_a<span style="color:#f92672">.</span>present?
  price_a
<span style="color:#66d9ef">elsif</span> price_b<span style="color:#f92672">.</span>present?
  price_b
<span style="color:#66d9ef">else</span>
  <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><p>Gross right? uh. I hate hate if structures like that just for checking if something has value. Following Avdi Grimm and reading his book &ldquo;Much Ado about Naught&rdquo; and his Confident Ruby has given me ideas to get around this type of coding! Using compact is great for this since it throws away any nils. Note this returns a copy of the array not changing it (as it would if it was compact!).</p>
<h2 id="compact-1">compact!</h2>
<pre><code>compact! → ary or nil
Removes nil elements from the array. Returns nil if no changes were made, otherwise returns ary.
</code></pre>
<p>Here's what I just said, the ! changes the array and if nothing changed it just returns nil.</p>
<h2 id="concat">concat</h2>
<pre><code>concat(other_ary) → ary 
Appends the elements of other_ary to self.
</code></pre>
<p>Concatenates one array into the other. Also could use + &hellip; let me try it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#f92672">&gt;&gt;</span> colors <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:red</span>, <span style="color:#e6db74">:green</span>, <span style="color:#e6db74">:blue</span><span style="color:#f92672">]</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:red</span>, <span style="color:#e6db74">:green</span>, <span style="color:#e6db74">:blue</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> colors<span style="color:#f92672">.</span>concat(<span style="color:#f92672">[</span><span style="color:#e6db74">:yellow</span>, <span style="color:#e6db74">:orange</span><span style="color:#f92672">]</span>)
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:red</span>, <span style="color:#e6db74">:green</span>, <span style="color:#e6db74">:blue</span>, <span style="color:#e6db74">:yellow</span>, <span style="color:#e6db74">:orange</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> colors
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:red</span>, <span style="color:#e6db74">:green</span>, <span style="color:#e6db74">:blue</span>, <span style="color:#e6db74">:yellow</span>, <span style="color:#e6db74">:orange</span><span style="color:#f92672">]</span>

<span style="color:#f92672">&gt;&gt;</span> colors <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:red</span>, <span style="color:#e6db74">:green</span>, <span style="color:#e6db74">:blue</span><span style="color:#f92672">]</span> <span style="color:#f92672">+</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:yellow</span>, <span style="color:#e6db74">:orange</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> colors
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:red</span>, <span style="color:#e6db74">:green</span>, <span style="color:#e6db74">:blue</span>, <span style="color:#e6db74">:yellow</span>, <span style="color:#e6db74">:orange</span><span style="color:#f92672">]</span>
</code></pre></div><p>So, looks like they both will add arrays and the arrays are identical. Depending on the context, I think i might like the concat better.</p>
<h2 id="count">count</h2>
<pre><code>count → int 
count(obj) → int
count { |item| block } → int
</code></pre>
<p>I think I knew count could count particular items but I forgot. Trying it out:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#f92672">&gt;&gt;</span> items <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:potion</span>, <span style="color:#e6db74">:food</span>, <span style="color:#e6db74">:food</span>, <span style="color:#e6db74">:weapon</span>, <span style="color:#e6db74">:potion</span><span style="color:#f92672">]</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:potion</span>, <span style="color:#e6db74">:food</span>, <span style="color:#e6db74">:food</span>, <span style="color:#e6db74">:weapon</span>, <span style="color:#e6db74">:potion</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> items<span style="color:#f92672">.</span>count(<span style="color:#e6db74">:potion</span>)
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span>
<span style="color:#f92672"></span><span style="color:#f92672">&gt;&gt;</span> items<span style="color:#f92672">.</span>count(<span style="color:#e6db74">:food</span>)
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span>
<span style="color:#f92672"></span></code></pre></div><p>So imagine if you were writing a game, and showing stats for things in your bag you could do something like this. The last one takes a block.</p>
<h2 id="cycle">cycle</h2>
<pre><code>cycle(n=nil) {|obj| block } → nil 
cycle(n=nil) → an_enumerator
</code></pre>
<p>Cycle will iterate through an array going through each item n times or forever</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#f92672">&gt;&gt;</span> levels <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:one</span>, <span style="color:#e6db74">:two</span>, <span style="color:#e6db74">:three</span>, <span style="color:#e6db74">:four</span>, <span style="color:#e6db74">:five</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> levels<span style="color:#f92672">.</span>cycle(<span style="color:#ae81ff">2</span><span style="color:#f92672"></span>) { <span style="color:#f92672">|</span>level<span style="color:#f92672">|</span> puts <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">level </span><span style="color:#e6db74">#{</span>level<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> }
level one
level two
level three
level four
level five
level one
level two
level three
level four
level five
</code></pre></div><p>This cycles through the array 2 times. Hmm that makes me wonder if I can use this as sort of a state machine?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#f92672">&gt;&gt;</span> status <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:draft</span>, <span style="color:#e6db74">:review</span>, <span style="color:#e6db74">:publish</span><span style="color:#f92672">]</span>
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">[</span><span style="color:#e6db74">:draft</span>, <span style="color:#e6db74">:review</span>, <span style="color:#e6db74">:publish</span><span style="color:#f92672">]</span>
<span style="color:#f92672">&gt;&gt;</span> status<span style="color:#f92672">.</span>cycle(<span style="color:#ae81ff">1</span><span style="color:#f92672"></span>)
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#75715e">#&lt;Enumerator: [:draft, :review, :publish]:cycle(1)&gt;</span>
<span style="color:#f92672">&gt;&gt;</span> states <span style="color:#f92672">=</span> status<span style="color:#f92672">.</span>cycle(<span style="color:#ae81ff">1</span><span style="color:#f92672"></span>)
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#75715e">#&lt;Enumerator: [:draft, :review, :publish]:cycle(1)&gt;</span>
<span style="color:#f92672">&gt;&gt;</span> states<span style="color:#f92672">.</span>next
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">:draft</span>
<span style="color:#f92672">&gt;&gt;</span> states<span style="color:#f92672">.</span>next
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">:review</span>
<span style="color:#f92672">&gt;&gt;</span> states<span style="color:#f92672">.</span>next
<span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">:publish</span>
<span style="color:#f92672">&gt;&gt;</span> states<span style="color:#f92672">.</span>next
<span style="color:#e6db74">StopIteration</span>: iteration reached an <span style="color:#66d9ef">end</span>
	       from (irb):<span style="color:#ae81ff">62</span><span style="color:#f92672"></span><span style="color:#e6db74">:in</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">next&#39;
</span><span style="color:#e6db74">	       from (irb):62
</span><span style="color:#e6db74">	       from /Users/nolastowe/.rvm/rubies/ruby-1.9.3-p392/bin/irb:16:in </span><span style="color:#e6db74">`</span><span style="color:#f92672">&lt;</span>main<span style="color:#f92672">&gt;</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
</code></pre></div><p>Hmm interesting. Well maybe needs some work. :) Next is a method for dealing with loops&hellip; not sure if its great to be using with cycle, its just something that came to my head when I was playing around.</p>
<p>This is enough for now, next blog post will start with delete.</p>

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
