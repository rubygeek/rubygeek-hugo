<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Cool Things In Clojure 1.9 - Rubygeek</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Cool Things In Clojure 1.9" />
<meta property="og:description" content="I was glad to see Clojure 1.9 out because of Spec and some more things. But, was sad, because I can no longer say &ldquo;Hey! I have a commit in the latest version of clojure!&quot;. Course, that just gives me some motivation to find ways to help out in .. Clojure 2.0 ?? OMG. I don&#39;t like to brag, but it was fun when this guy in my community (mostly he didn&#39;t do Clojure) when he heard I had a patch in 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rubygeek.com/post/2018-01-17-cool-things-in-clojure-1-dot-9/" />
<meta property="article:published_time" content="2018-01-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-01-17T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cool Things In Clojure 1.9"/>
<meta name="twitter:description" content="I was glad to see Clojure 1.9 out because of Spec and some more things. But, was sad, because I can no longer say &ldquo;Hey! I have a commit in the latest version of clojure!&quot;. Course, that just gives me some motivation to find ways to help out in .. Clojure 2.0 ?? OMG. I don&#39;t like to brag, but it was fun when this guy in my community (mostly he didn&#39;t do Clojure) when he heard I had a patch in 1."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://rubygeek.comcss/main.css" />

	
		<script src="http://rubygeek.comjs/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="http://rubygeek.com">Rubygeek</a></h1>
	<div class="site-description"><nav class="nav social">
			<ul class="flat"></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">17</span>
							<span class="rest">Jan 2018</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Cool Things In Clojure 1.9</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>I was glad to see Clojure 1.9 out because of <a href="https://clojure.org/guides/spec">Spec</a> and some more things. But, was sad, because I can no longer say &ldquo;Hey! I have a <a href="https://dev.clojure.org/jira/browse/CLJ-1449">commit</a> in the latest version of clojure!&quot;. Course, that just gives me some motivation to find ways to help out in .. Clojure 2.0 ?? OMG. I don't like to brag, but it was fun when this guy in my community (mostly he didn't do Clojure) when he heard I had a patch in 1.8, come up to me and say &ldquo;BADASS!!! WAY TO GO!!!&quot;. I did have the help of <a href="https://twitter.com/puredanger">Alex Miller</a> and others and it was partly done when I took it over. It was really fun to be a small part of 1.8</p>
<p>Here are the things I think are cool (besides Spec) in Clojure 1.9:</p>
<h2 id="reader-syntax-for-namespaced-maps">Reader Syntax for Namespaced Maps</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#66d9ef">def </span>data <span style="color:#f92672">#</span><span style="color:#e6db74">:person</span>{<span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;Nola&#34;</span>, <span style="color:#e6db74">:color</span> <span style="color:#e6db74">&#34;purple&#34;</span>, <span style="color:#e6db74">:state</span> <span style="color:#e6db74">&#34;TX&#34;</span>})
<span style="color:#f92672">#</span><span style="color:#e6db74">&#39;user/data</span>

user=&gt; (keys data)
(<span style="color:#e6db74">:person/name</span> <span style="color:#e6db74">:person/color</span> <span style="color:#e6db74">:person/state</span>)
</code></pre></div><p>Using #:ns-name{ key value key value } gives you an easy way to write out your map without prefixing each key. COOL.</p>
<h2 id="predicate-functions">Predicate Functions</h2>
<p>This were put in mainly (I think) to support Spec, but in short, predicate functions (ending in ?) return true or false.</p>
<p>Some of them <a href="https://github.com/clojure/clojure/blob/master/changes.md#13-new-predicates">added in this patch</a> are:</p>
<ul>
<li>boolean?</li>
<li>int? pos-int? nat-int?</li>
<li>double?</li>
<li>ident?</li>
<li>qualified-keyword?</li>
</ul>
<p>For example, Using <a href="https://clojuredocs.org/clojure.core/remove">remove</a> with a collection will remove all values for which the predicate is true. So to remove all the postive integers from a vector:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (remove pos-int? [<span style="color:#ae81ff">-4</span> <span style="color:#ae81ff">-2</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">-2</span> <span style="color:#ae81ff">5</span>])
(<span style="color:#ae81ff">-4</span> <span style="color:#ae81ff">-2</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">-2</span>)
</code></pre></div><p>Then of course, in a spec:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#a6e22e">s/def</span> <span style="color:#e6db74">::age</span> pos-int?)
<span style="color:#e6db74">:user/age</span>

user=&gt; (<span style="color:#a6e22e">s/conform</span> <span style="color:#e6db74">::age</span> <span style="color:#ae81ff">-16</span>)
<span style="color:#e6db74">:clojure.spec.alpha/invalid</span>

user=&gt; (<span style="color:#a6e22e">s/conform</span> <span style="color:#e6db74">::age</span> <span style="color:#ae81ff">13</span>)
<span style="color:#ae81ff">13</span>
</code></pre></div><p>Then lets remove everything not a qualified keyword, using in an anonymous function::</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (remove <span style="color:#f92672">#</span>(not (<span style="color:#a6e22e">qualified-keyword?</span> %))  [<span style="color:#e6db74">:name/nola</span> <span style="color:#e6db74">:color/purple</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">0</span>])
(<span style="color:#e6db74">:name/nola</span> <span style="color:#e6db74">:color/purple</span>)
</code></pre></div><p>Previous you could do the samething of course, but you'd have to write more code. I don't know if you would use them much outside of spec, but if you do there they are there. Nice.</p>
<h2 id="atoms-get-new-functions">Atoms get new functions!</h2>
<p>Ever wanted to give an atom a new value but also get back what the value <em>was</em> too?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#66d9ef">def </span>name (<span style="color:#a6e22e">atom</span> <span style="color:#e6db74">&#34;Nola&#34;</span>))

user=&gt; (<span style="color:#a6e22e">reset-vals!</span> name <span style="color:#e6db74">&#34;Nick&#34;</span>)
[<span style="color:#e6db74">&#34;Nola&#34;</span> <span style="color:#e6db74">&#34;Nick&#34;</span>]
</code></pre></div><p>Instead of just <a href="https://clojuredocs.org/clojure.core/reset!">reset!</a> you now have reset-vals! returning the old value followed by the new (current) value. And this funtion's cousin swap-vals!:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">user=&gt; (<span style="color:#66d9ef">def </span>size (<span style="color:#a6e22e">atom</span> <span style="color:#ae81ff">10</span>))
<span style="color:#f92672">#</span><span style="color:#e6db74">&#39;user/size</span>

user=&gt; (<span style="color:#a6e22e">swap-vals!</span> size inc)
[<span style="color:#ae81ff">10</span> <span style="color:#ae81ff">11</span>]
</code></pre></div><p>This function, <code>swap-vals!</code> takes an atom and a function and returns the new and the old value.</p>
<p>And before you <a href="https://en.wiktionary.org/wiki/bikeshedding">bikeshed</a> on the names of these functions, don't bother, it has <a href="https://dev.clojure.org/jira/browse/CLJ-1454">been done</a>. I think they are good names :)</p>
<h2 id="brew-install">Brew Install</h2>
<p>Not exactly a part of the <a href="https://clojure.org/news/2017/12/08/clojure19">Clojure 1.9 Release Notes</a> but I think it bears mention along with this release is that for you Mac Users (like me!), you can now <code>brew install clojure</code>. I wrote <a href="http://www.rubygeek.com/2017/12/27/getting-started-with-clojure-is-now-easier-than-ever-mac/">about it</a> early because I was so excited. Read the post for more details which also links to more documentation on it.</p>
<p>And also if you are an new Clojure dev, with Atom you can setup a decent <a href="https://medium.com/@jacekschae/slick-clojure-editor-setup-with-atom-a3c1b528b722?__s=gbwqypueretgonjwasja">Clojure environment with Atom</a>. I recommend looking over the docs for <a href="https://shaunlebron.github.io/parinfer/">parinfer</a> to learn its magics, but once you get it you are good for life.</p>
<p>I hope you are excited about Clojure 1.9 and are using it in your projets :) It was a long time coming, but the best things are worth waiting for, right? :)</p>

			</div>

			<div class="tags">
				
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


</body>
</html>
